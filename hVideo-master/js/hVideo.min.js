var hVideo=function(a){var b=this;this.dom='<div class="h-videoBox"><div class="h-loading"><div class="bfBtn" style="visibility:hidden;opacity:0;"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div><div class="sptxt">加载中...</div></div></div><video src="" class="h-videoAct"></video><div class="videoState"><div class="videoStateBox"><div class="playOrStop"><i class="iconfont playIcon">&#xe600;</i></div><div class="currentTimeBox"><span class="currentTimers">0:00</span><span>/</span><span class="allTimers">0:00</span></div><div class="percentage"><div class="currentPerc"></div><div class="currentPercentage"></div><div class="currentAll"></div><div class="currentBG"></div></div><div class="videoSpeed"><div class="videoBoxRe"><i class="iconfont">&#xe603;</i><ul class="videoSpeedList"><li class="videoSpeedStup bs4">2.0倍</li><li class="videoSpeedStup bs3">1.75倍</li><li class="videoSpeedStup bs2">1.5倍</li><li class="videoSpeedStup bs1">默认</li></ul></div></div><div class="videoSound"><div class="videoSoundBox"><i class="iconfont videoSoundStop">&#xe605;</i><div class="soundBar"><div class="currentSound"></div></div></div></div></div></div></div>',this.D=function(a){return null!=document.getElementById(a)&&void 0!=document.getElementById(a)&&"undefined"!=document.getElementById(a)?document.getElementById(a):(alert("找不到指定id: "+a),void 0)},this.C=function(b){return this.D(a.id).getElementsByClassName(b)[0]},this.pools={},this.saveDom=function(){this.pools.videoDom=this.C("h-videoAct"),this.pools.work=this.C("currentPercentage"),this.pools.work2=this.C("currentPerc"),this.pools.currentTm=this.C("currentTimers"),this.pools.allTime=this.C("allTimers"),this.pools.percentage=this.C("percentage"),this.pools.playOrStop=this.C("playOrStop"),this.pools.playIcon=this.C("playIcon"),this.pools.bfBtn=this.C("bfBtn"),this.pools.sptxt=this.C("sptxt"),this.pools.soundBarBox=this.C("soundBar"),this.pools.soundBar=this.C("currentSound"),this.pools.vSoundStop=this.C("videoSoundStop"),this.pools.currentBG=this.C("currentBG"),this.pools.bs1=this.C("bs1"),this.pools.bs2=this.C("bs2"),this.pools.bs3=this.C("bs3"),this.pools.bs4=this.C("bs4"),this.pools.stateBar=this.C("videoState")},this.setUrl=function(b){return this.pools.videoDom.src=void 0==b||"undefined"==b||null==b?a.url:b},this.stopOrPlay=function(a){switch(a){case!0:this.pools.videoDom.play();break;case!1:this.pools.videoDom.pause();break;default:this.pools.videoDom.paused?this.pools.videoDom.play():this.pools.videoDom.pause()}},this.videoCurrentTime=function(){return 100*(this.pools.videoDom.currentTime/this.videoAllTime()).toFixed(3)},this.videoAllTime=function(){return this.pools.videoDom.duration},this.timeConversion=function(a){var b=a%60,c=parseInt(a/60);return(Array(2).join(0)+c).slice(-2)+":"+(Array(2).join(0)+b).slice(-2)},this.mouseCurrentX=function(a,b){var c=b||window.event,d=this.C(a),e=parseInt(d.getBoundingClientRect().left);return c.clientX-e},this.getDomWidth=function(a){var b=this.C(a);return parseInt(b.width||b.offsetWidth||b.clientWidth)},this.openLoading=function(a){a?(this.pools.bfBtn.style.visibility="visible",this.pools.bfBtn.style.opacity="1"):(this.pools.bfBtn.style.visibility="hidden",this.pools.bfBtn.style.opacity="0")},this.init=function(){this.saveDom(),this.setUrl(),this.pools.videoDom.autoplay=a.autoplay?!0:!1,this.pools.stateBar.style.display=a.controls?"block":0==a.controls?"none":"block",this.pools.videoDom.onclick=function(){b.stopOrPlay()},this.pools.videoDom.ontimeupdate=function(){b.pools.playIcon.innerHTML=b.pools.videoDom.paused?"&#xe602":"&#xe600",b.pools.work.style.width=b.videoCurrentTime()+"%",b.pools.work2.style.width=b.videoCurrentTime()+"%",b.pools.currentTm.innerHTML=b.timeConversion(parseInt(b.pools.videoDom.currentTime)),b.pools.allTime.innerHTML=b.timeConversion(parseInt(b.videoAllTime()))},this.pools.videoDom.onwaiting=function(){return b.openLoading(!0)},this.pools.videoDom.onplaying=function(){return b.openLoading(!1)},this.pools.videoDom.onvolumechange=function(){var a=b.pools.videoDom.volume,c=b.getDomWidth("soundBar")*a;return b.pools.soundBar.style.width=c+"px"},this.pools.percentage.onclick=function(){var a=b.mouseCurrentX("percentage")/b.getDomWidth("percentage");return b.pools.videoDom.currentTime=b.videoAllTime()*a},this.pools.playOrStop.onclick=function(){b.stopOrPlay()},this.pools.soundBarBox.onclick=function(){var a=b.getDomWidth("soundBar"),c=b.mouseCurrentX("soundBar");return b.pools.videoDom.volume=c/a.toFixed(2)},this.pools.vSoundStop.onclick=function(){b.pools.videoDom.muted?(b.pools.videoDom.muted=!1,b.pools.videoDom.volume=.99,b.pools.vSoundStop.innerHTML="&#xe605;"):(b.pools.videoDom.muted=!0,b.pools.videoDom.volume=0,b.pools.vSoundStop.innerHTML="&#xe604;")},this.pools.bs1.onclick=function(){return b.pools.videoDom.playbackRate=1},this.pools.bs2.onclick=function(){return b.pools.videoDom.playbackRate=1.5},this.pools.bs3.onclick=function(){return b.pools.videoDom.playbackRate=1.75},this.pools.bs4.onclick=function(){return b.pools.videoDom.playbackRate=2}},this.delete=function(){var e,b=this.D(a.id),c=b.childNodes,d=c.length;for(e=0;d>e;e++)b.removeChild(c[0]);return!1},this.create=function(){return null!=this.C("h-videoBox")&&void 0!=this.C("h-videoBox")&&"undefined"!=this.C("h-videoBox")?(alert("播放器已存在"),void 0):(this.D(a.id).innerHTML=this.dom,this.init(),void 0)},this.create()};